<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Student Mark Predictor ‚Äî Dashboard</title>

  <!-- Fonts (system fallback) -->
  <style>
    :root{
      --bg1:#6D5DFB; --bg2:#4FC3F7; --card:#ffffff;
      --accent:#FF6B6B; --accent2:#FFD166; --muted:#6b7280;
      --glass: rgba(255,255,255,0.08);
    }
    *{box-sizing:border-box}
    html,body{height:100%;margin:0;font-family:"Poppins",system-ui,-apple-system,Segoe UI,Roboto,"Helvetica Neue",Arial;color:#0f172a}
    /* Full-screen animated gradient background with floating shapes */
    body{
      background: linear-gradient(135deg,var(--bg1),var(--bg2));
      overflow:auto;
      -webkit-font-smoothing:antialiased;
      -moz-osx-font-smoothing:grayscale;
    }

    /* Animated floating shapes container */
    .bg-anim{
      position:fixed; inset:0; z-index:0; pointer-events:none;
      overflow:hidden;
    }
    .shape{
      position:absolute;
      border-radius:50%;
      opacity:0.18;
      filter: blur(18px);
      transform: translate3d(0,0,0);
      animation: float 8s ease-in-out infinite;
    }
    .shape.s1{width:420px;height:420px;background:#FFFFFF; left:-80px; top:-40px; animation-duration:12s;}
    .shape.s2{width:280px;height:280px;background:#FFD166; right:-60px; top:60px; animation-duration:10s;}
    .shape.s3{width:180px;height:180px;background:#FF6B6B; left:20%; bottom:-60px; animation-duration:9s;}
    @keyframes float{
      0%{transform:translateY(0) rotate(0deg)}
      50%{transform:translateY(-30px) rotate(20deg)}
      100%{transform:translateY(0) rotate(0deg)}
    }

    /* Page layout */
    .wrap{position:relative; z-index:1; max-width:1200px; margin:40px auto; padding:28px}
    header{display:flex;gap:20px;align-items:center;margin-bottom:24px}
    .logo{
      display:flex;align-items:center;gap:12px;background:rgba(255,255,255,0.12);padding:10px 14px;border-radius:12px;backdrop-filter: blur(6px);
      box-shadow:0 8px 24px rgba(0,0,0,0.12);
    }
    .logo svg{width:46px;height:46px}
    .brand{font-weight:700;font-size:20px;color:white}
    header .spacer{flex:1}

    /* Main grid */
    .grid{display:grid;grid-template-columns: 480px 1fr; gap:22px; align-items:start}
    /* Left card (form + tabs) */
    .card{
      background:linear-gradient(180deg, rgba(255,255,255,0.95), rgba(255,255,255,0.93));
      border-radius:16px;padding:20px; box-shadow: 0 10px 30px rgba(2,6,23,0.18);
    }
    .tabs{display:flex;gap:8px;margin-bottom:16px}
    .tab{flex:1;padding:10px 12px;border-radius:10px;background:transparent;color:var(--muted);text-align:center;font-weight:600;cursor:pointer;}
    .tab.active{background:linear-gradient(90deg,var(--bg1),var(--bg2)); color:white; box-shadow: 0 8px 20px rgba(75,85,255,0.18)}
    .tab svg{vertical-align:middle;margin-right:8px}

    /* form fields */
    .field{margin-bottom:12px}
    label{display:block;font-weight:600;margin-bottom:6px;color:#334155}
    input[type="text"], input[type="number"], select{
      width:100%; padding:12px 12px;border-radius:10px;border:1px solid #e6e9ef;font-size:15px;
      background:#fff; box-shadow: inset 0 1px 0 rgba(16,24,40,0.02);
    }
    .row{display:flex; gap:12px}
    .row .col{flex:1}

    .actions{display:flex; gap:12px; margin-top:14px}
    .btn{flex:1;padding:12px;border-radius:10px;border:0;cursor:pointer;font-weight:700}
    .btn.primary{background:linear-gradient(90deg,var(--bg1),var(--bg2));color:white}
    .btn.ghost{background:transparent;border:1px solid rgba(15,23,42,0.06);color:#334155}

    /* Right column: Poster + Preview */
    .poster{
      border-radius:16px; padding:22px; min-height:220px; background:linear-gradient(135deg,#ffffff,rgba(255,255,255,0.92));
      box-shadow:0 12px 30px rgba(0,0,0,0.08); display:flex; flex-direction:column; gap:14px;
    }
    .poster .title{font-size:20px;font-weight:800;color:#0b1220}
    .poster .subtitle{color:#475569}
    .poster-visual{height:120px;border-radius:12px;background:linear-gradient(90deg,#6D5DFB,#4FC3F7); display:flex;align-items:center;justify-content:center;color:white;font-weight:800;font-size:22px}
    .poster .cta{margin-top:auto; display:flex; gap:10px}

    /* Result card (big, colorful) */
    .result-wrap{margin-top:16px;padding:16px;border-radius:12px;background:linear-gradient(90deg,#E8F0FF,#F1F8FF);display:flex;gap:16px;align-items:center}
    .result-icon{width:64px;height:64px;border-radius:12px;background:linear-gradient(90deg,#4FC3F7,#6D5DFB);display:flex;align-items:center;justify-content:center;color:white;font-weight:900;font-size:26px}
    .result-body{flex:1}
    .result-body h3{margin:0;font-size:20px}
    .muted{color:#475569}

    /* small table for subjects/marks */
    table{width:100%;border-collapse:collapse;margin-top:12px}
    th,td{padding:8px;border-bottom:1px solid #eef2f7;text-align:left}
    th{color:#334155;font-weight:700}

    /* responsive */
    @media(max-width:980px){
      .grid{grid-template-columns:1fr; padding:0}
      .wrap{padding:14px}
      .card{order:2}
      .poster{order:1}
    }
  </style>
</head>
<body>
  <!-- animated shapes in background -->
  <div class="bg-anim" aria-hidden="true">
    <div class="shape s1"></div>
    <div class="shape s2"></div>
    <div class="shape s3"></div>
  </div>

  <div class="wrap">
    <header>
      <div class="logo" title="Student Mark Predictor">
        <!-- inline logo -->
        <svg viewBox="0 0 64 64" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
          <defs><linearGradient id="lg" x1="0" x2="1"><stop offset="0" stop-color="#6D5DFB"/><stop offset="1" stop-color="#4FC3F7"/></linearGradient></defs>
          <rect width="64" height="64" rx="12" fill="url(#lg)"/>
          <path d="M16 42c10-16 32-16 32 0" fill="none" stroke="#fff" stroke-width="4" stroke-linecap="round" />
        </svg>
        <div>
          <div class="brand" style="color:white">Student Mark Predictor</div>
          <div style="font-size:12px;color:rgba(255,255,255,0.85)">Flask ‚Ä¢ Scikit-Learn ‚Ä¢ Web Demo</div>
        </div>
      </div>
      <div class="spacer"></div>
      <!-- small header actions -->
      <div style="display:flex;gap:10px;align-items:center">
        <div style="color:white;font-weight:600">Hello, Developer</div>
      </div>
    </header>

    <main class="grid">
      <!-- LEFT: Tabs + Form -->
      <section class="card" aria-labelledby="form-title">
        <div class="tabs" role="tablist">
          <button class="tab active" data-tab="profile" role="tab" aria-selected="true">
            <!-- profile icon -->
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" style="vertical-align:middle"><path d="M12 12c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zM4 22c0-4 8-6 8-6s8 2 8 6v2H4v-2z" fill="#334155"/></svg>
            Profile
          </button>
          <button class="tab" data-tab="academic" role="tab">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" style="vertical-align:middle"><path d="M12 2l9 4-9 4-9-4 9-4zM3 10l9 4 9-4M3 14v6h18v-6" fill="#334155"/></svg>
            Academic
          </button>
          <button class="tab" data-tab="subjects" role="tab">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" style="vertical-align:middle"><path d="M12 2l4 9H8l4-9zM6 12h12v10H6z" fill="#334155"/></svg>
            Subjects
          </button>
          <button class="tab" data-tab="admission" role="tab">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" style="vertical-align:middle"><path d="M12 2l3 7H9l3-7zM4 22h16v-2H4v2z" fill="#334155"/></svg>
            Admission Poster
          </button>
        </div>

        <!-- Tab Panels -->
        <div id="profile" class="panel">
          <h2 id="form-title" style="margin-top:0">Student Profile</h2>
          <div class="field">
            <label>Full Name</label>
            <input type="text" id="name" placeholder="e.g., Jayvanti Palwe">
          </div>
          <div class="row">
            <div class="col field">
              <label>Roll No.</label>
              <input type="text" id="roll" placeholder="e.g., 21CS045">
            </div>
            <div class="col field">
              <label>Gender</label>
              <select id="gender">
                <option value="">Select</option>
                <option>Male</option>
                <option>Female</option>
                <option>Other</option>
              </select>
            </div>
          </div>
        </div>

        <div id="academic" class="panel" style="display:none">
          <h2 style="margin-top:0">Academic</h2>
          <div class="field">
            <label>Course / Class</label>
            <input type="text" id="course" placeholder="e.g., B.E. Electronics">
          </div>
          <div class="field">
            <label>Semester</label>
            <input type="text" id="semester" placeholder="e.g., 6">
          </div>
        </div>

        <div id="subjects" class="panel" style="display:none">
          <h2 style="margin-top:0">Subjects & Marks</h2>

          <!-- A simple subject entry form (you can add many) -->
          <div id="subjects-list">
            <div style="display:flex;gap:8px;align-items:center;margin-bottom:8px">
              <input type="text" class="subj-name" placeholder="Subject name (e.g., Maths)">
              <input type="number" class="subj-marks" placeholder="Marks obtained">
              <button class="btn ghost small add-row" type="button" style="padding:8px;border-radius:8px">Add</button>
            </div>
          </div>

          <div style="font-size:13px;color:var(--muted)">After adding subjects, click <strong>Predict</strong> to compute total & pass/fail.</div>
        </div>

        <div id="admission" class="panel" style="display:none">
          <h2 style="margin-top:0">Admission Poster</h2>
          <p class="muted">This poster will be shown on the right as a large colorful banner ‚Äî great for promotions.</p>
          <div style="display:flex;gap:8px">
            <input type="text" id="course-banner" placeholder="Admission open for (e.g., B.E. Electronics)">
            <input type="text" id="deadline" placeholder="Apply by (e.g., 31 Dec 2025)">
          </div>
          <div style="margin-top:10px;font-size:13px;color:#475569">Fill details and press <strong>Update Poster</strong></div>
        </div>

        <!-- actions: predict, update poster -->
        <div class="actions" aria-hidden="false" style="margin-top:18px">
          <button class="btn primary" id="predictBtn" type="button">üîÆ Predict</button>
          <button class="btn ghost" id="updatePoster" type="button">üì£ Update Poster</button>
        </div>

        <!-- Prediction result (client-side preview) -->
        <div id="resultPreview" style="display:none" class="result-wrap" aria-live="polite">
          <div class="result-icon">üîç</div>
          <div class="result-body">
            <h3 id="resultText">Predicted Marks: ‚Äî</h3>
            <div class="muted" id="resultSub">Total: ‚Äî | Status: ‚Äî</div>
          </div>
        </div>
      </section>

      <!-- RIGHT: Poster + live preview + subjects table -->
      <aside class="poster" aria-label="Poster and Preview">
        <div>
          <div class="title">Admissions 2025 ‚Äî Open Now</div>
          <div class="subtitle">High-quality technical courses ‚Ä¢ Apply today</div>
        </div>

        <div class="poster-visual" id="posterVisual">
          <div>
            <div style="font-size:18px">üìö Apply Now</div>
            <div style="font-size:13px;margin-top:8px">Seats are limited ‚Äî Register today</div>
          </div>
        </div>

        <div style="display:flex;gap:10px;align-items:center">
          <div style="flex:1">
            <div style="font-weight:700">Upcoming Intake</div>
            <div style="color:#64748b;font-size:13px">Session starts: Jan 2026</div>
          </div>
          <div>
            <button class="btn primary" id="applyNow">Apply</button>
          </div>
        </div>

        <div style="margin-top:12px">
          <div style="font-weight:700;margin-bottom:8px">Subjects Added</div>
          <table id="subjectsTable" aria-live="polite">
            <thead><tr><th>Subject</th><th>Marks</th></tr></thead>
            <tbody></tbody>
          </table>
        </div>

        <div id="serverResult" style="margin-top:14px"></div>
      </aside>
    </main>
  </div>

  <!-- Small client-side script to handle tabs, subjects rows, prediction preview and poster -->
  <script>
    // Tabs
    document.querySelectorAll('.tab').forEach(btn=>{
      btn.addEventListener('click', ()=> {
        document.querySelectorAll('.tab').forEach(t=>t.classList.remove('active'));
        document.querySelectorAll('.panel').forEach(p=>p.style.display='none');
        btn.classList.add('active');
        const id = btn.dataset.tab;
        document.getElementById(id).style.display='block';
      });
    });

    // Add subject row
    document.querySelector('.add-row').addEventListener('click', ()=>{
      const name = document.querySelector('.subj-name').value.trim();
      const marks = document.querySelector('.subj-marks').value.trim();
      if(!name || marks==='' ){ alert('Enter subject name and marks'); return; }
      addSubjectRow(name, marks);
      document.querySelector('.subj-name').value=''; document.querySelector('.subj-marks').value='';
    });

    function addSubjectRow(name, marks){
      const tbody = document.querySelector('#subjectsTable tbody');
      const tr = document.createElement('tr');
      tr.innerHTML = `<td>${escapeHtml(name)}</td><td>${escapeHtml(marks)}</td>`;
      tbody.appendChild(tr);
    }

    // Escape helper
    function escapeHtml(s){ return String(s).replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;'); }

    // Update poster
    document.getElementById('updatePoster').addEventListener('click', ()=>{
      const course = document.getElementById('course-banner').value || 'Admissions Open';
      const deadline = document.getElementById('deadline').value || 'Apply Now';
      const pv = document.getElementById('posterVisual');
      pv.innerHTML = `<div style="text-align:center"><div style="font-size:20px;font-weight:800">${escapeHtml(course)}</div><div style="margin-top:6px;font-size:14px">${escapeHtml(deadline)}</div></div>`;
    });

    // Predict button: does a client-side preview, then sends to server if needed
    document.getElementById('predictBtn').addEventListener('click', async()=>{
      // collect data
      const name = document.getElementById('name').value.trim();
      const roll = document.getElementById('roll').value.trim();
      const gender = document.getElementById('gender').value;
      const course = document.getElementById('course').value.trim();
      const semester = document.getElementById('semester').value.trim();

      // collect subjects
      const rows = Array.from(document.querySelectorAll('#subjectsTable tbody tr'));
      if(rows.length===0){ alert('Please add at least one subject and marks.'); return; }
      let total=0;
      rows.forEach(r=>{
        const m = Number(r.children[1].innerText) || 0;
        total += m;
      });
      const avg = (total / rows.length);
      const status = avg >= 40 ? 'Pass' : 'Fail'; // simple rule (you can change)

      // show preview
      document.getElementById('resultPreview').style.display='flex';
      document.getElementById('resultText').innerText = `Predicted Average Marks: ${avg.toFixed(2)}`;
      document.getElementById('resultSub').innerText = `Total: ${total} | Subjects: ${rows.length} | Status: ${status}`;

      // Optionally: send to server to get model prediction (example uses study hours average)
      // If your Flask endpoint expects "study_hours", send avgHours (we'll use avg/10 as hours proxy)
      try {
        const studyHours = (avg/10).toFixed(2); // proxy mapping; change if you have a proper model input
        const form = new FormData();
        form.append('study_hours', studyHours);

        // send to server /predict (assumes Flask route exists)
        const res = await fetch('/predict', {method:'POST', body: form});
        const text = await res.text();
        // The server returns the full HTML page; to parse server result you'd normally return JSON.
        // We'll just show a simple server acknowledgment
        document.getElementById('serverResult').innerHTML = '<div style="font-size:13px;color:#334155;margin-top:8px">Server responded ‚Äî prediction requested.</div>';
      } catch(e){
        document.getElementById('serverResult').innerHTML = '<div style="font-size:13px;color:#ff3b30;margin-top:8px">Server request failed (if running locally, ensure Flask app is started).</div>';
      }
    });

    // Apply Now button ‚Äî opens a sample form or scrolls to profile
    document.getElementById('applyNow').addEventListener('click', ()=>{
      // switch to profile tab
      document.querySelector('[data-tab="profile"]').click();
      window.scrollTo({top:0,behavior:'smooth'});
      document.getElementById('name').focus();
    });

    // small helper: when page loads, focus name
    window.addEventListener('load', ()=>{ document.getElementById('name').focus(); });

  </script>
</body>
</html>
